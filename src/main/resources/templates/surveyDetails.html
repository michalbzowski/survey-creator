{#include layouts/main}
{#title}Szczegóły listy obecności{/title}
{#body}

{#each survey.events}
<p>{it.name}</p>
{/each}

<h3>Przypisane osoby</h3>
{#if links.isEmpty()}
<p>Brak przypisanych osób.</p>
<a href="#" class="generate-links" data-id="{survey.id}">
    Wygeneruj linki
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link-icon lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
</a>
{#else}
<table>
    <thead>
    <tr>
        <th>Imię</th>
        <th>Nazwisko</th>
        <th>Email</th>
        <th>Link</th>
        <th>Email</th>
        <th>Odpowiedź</th>
    </tr>
    </thead>
    <tbody>
    {#for link in links}
    <tr>
        <td>{link.personFirstName}</td>
        <td>{link.personLastName}</td>
        <td>{link.personEmail}</td>
        <td><a href="/web/responses/{link.linkToken}" target="_blank">Otwórz</a></td>

        <td style="text-align: center;">
            {#if link.status.name() eq "TO_SEND"}
            <form id="send-email-button" action="/api/v1/links/{survey.id}/email/{link.personId}" method="post" style="display:inline;">
                <button type="submit">Wyślij</button>
            </form>
            {#else}
            <i class="si-check-circle"></i>
            {/if}
        </td>
        <td style="text-align: center;">
            {#if link.surveyAnswered}
            <i class="si-check-circle"></i>
            {#else}
            <i class="si-ban"></i>
            {/if}
        </td>
    </tr>
    {/for}
    </tbody>
</table>
{/if}
<script src="/js/script_list_surveys_umbrella.js"></script>
{/body}
{/include}
